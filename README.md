# Movie_Project

## Algorithm

1.  각각의 영화에 대하여 평가는 가입된 유저만 등록 할 수 있다.

2.  평가 항목은 다음과 같다.

    1.  ``like``

        -   유저는 점수로 기록하는 평점 대신 ``좋아요`` / ``싫어요`` 두가지로 평가하게 된다.

        -   값은 ``True`` 또는 ``False`` 로 저장

    2.  ``comment``

    3.  ``keyword1``

        1.  주어진 키워드 목록에서 해당 영화에 어울린다고 생각하는 키워드를 유저가 선택하게 된다. (투표방식)

    4.  ``keyword2``

3.  위에서 유저가 rating 을 등록하게 되면, ``update_user_keyword`` 라는 함수를 실행된다.

    -   ``update_user_keyword``
        1.  Rating objects 가운데, request 보낸 유저가 작성한 모든 평가항목을 가져온다.
        2.  유저가 선태한 각각의 키워드에 대하여 갯수를 센다.
        3.  가장 많이 선택된 키워드 두가지를 선정하여 각각의 키워드를 유저 모델 field에 유저 대표 키워드, 유저 sub 키워드로 저장하게 된다.
    -   ``update_movie_keyword``
        1.  위와 동일

4.  유저가 영화를 추천받고자 할 때 실행될 추천 알고리즘은 유저 정보를 바탕으로 작성되었다.

    1.  유저의 메인 키워드와 영화의 메인 키워드가 같고, 유저의 서브 키워드와 메인 키워드가 같은 영화를 모은다.
        1.  1에서 산출된 영화의 갯수가 5개 이상이면 이 가운데 5개를 랜덤으로 뽑아서 내보내게 된다.
    2.  1에서 산출된 영화의 갯수가 5개 미만이면, 유저의 서브 키워드가 영화의 메인 키워드와 같고, 유저의 메인 키워드가 영화의 서브 키워드가 같은 영화를 1의 결과에 더해준다.
        1.  이 결과 산출된 영화의 갯수가 5개 이상이면, 해당 결과의 앞에서 5개 결과만 내보낸다. 
    3.  2의 결과가 5개 미만이면, 유저의 메인 키워드가 영화의 메인 또는 서브 키워드와 같은 영화를 2의 결과에 더해준다.
        1.  이 결과 산출된 영화의 갯수가 5개 이상이면, 해당 결과의 앞에서 5개 결과만 내보낸다. 
    4.  3의 결과가 5개 미만이면, 유저의 서브 키워드가 영화의 메인 또는 서브 키워드와 같은 영화를 3의 결과에 더해주다.
        1.  이 결과 산출된 영화의 갯수가 5개 이상이면, 해당 결과의 앞에서 5개 결과만 내보낸다. 
    5.  4의 결과가 5개 미만이면, 유저가 가장 선호하는 장르가 영화의 메인 장르와 같고, 유저가 두번째로 선호하는 장르가 영화의 서브 장르와 같은 영화를 4의 결과에 더해준다.
        1.  이 결과 산출된 영화의 갯수가 5개 이상이면, 해당 결과의 앞에서 5개 결과만 내보낸다.
    6.  5의 결과가 5개 미만이면, 유저가 두번째로 선호하는 장르가 영화의 메인 장르과 같고, 유저가 ...
    7.  만약 키워드 개수가 동점일 경우는 평점이 작성된 순서에 의해 먼저 등록된 키워드가 먼저 나온다